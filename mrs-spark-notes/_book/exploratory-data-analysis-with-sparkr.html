<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Scalable Machine Learning and Data Science with Microsoft R Server and Spark</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="These are (tentatively) rough notes showcasing some tips on conducting large scale data analysis with R, Spark, and Microsoft R Server. The focus is primarily on machine learning with Azure HDInsight platform, but review other in-memory, large-scale data analysis platforms, such as R Services with SQL Server 2016, and discuss how to utilize BI tools such as PowerBI and Shiny for dynamic reporting, and report generation.">
  <meta name="generator" content="bookdown 0.0.70 and GitBook 2.6.7">

  <meta property="og:title" content="Scalable Machine Learning and Data Science with Microsoft R Server and Spark" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These are (tentatively) rough notes showcasing some tips on conducting large scale data analysis with R, Spark, and Microsoft R Server. The focus is primarily on machine learning with Azure HDInsight platform, but review other in-memory, large-scale data analysis platforms, such as R Services with SQL Server 2016, and discuss how to utilize BI tools such as PowerBI and Shiny for dynamic reporting, and report generation." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Scalable Machine Learning and Data Science with Microsoft R Server and Spark" />
  
  <meta name="twitter:description" content="These are (tentatively) rough notes showcasing some tips on conducting large scale data analysis with R, Spark, and Microsoft R Server. The focus is primarily on machine learning with Azure HDInsight platform, but review other in-memory, large-scale data analysis platforms, such as R Services with SQL Server 2016, and discuss how to utilize BI tools such as PowerBI and Shiny for dynamic reporting, and report generation." />
  

<meta name="author" content="Ali Zaidi, Machine Learning and Data Science, Microsoft">

<meta name="date" content="2016-06-01">


  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="starting-your-machine-learning-pipeline.html">
<link rel="next" href="data-manipulation-with-sparkr.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.6.1/htmlwidgets.js"></script>
<link href="libs/plotlyjs-1.10.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotlyjs-1.10.1/plotly-latest.min.js"></script>
<script src="libs/plotly-binding-3.5.5/plotly.js"></script>
<script src="libs/d3-3.5.5/d3.min.js"></script>
<script src="libs/d3-grid-0.1.0/d3-grid.js"></script>
<script src="libs/dimple-2.1.6/dimple.min.js"></script>
<script src="libs/dimple-binding-0.1/dimple.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Scalable Machine Learning with MRS and Spark</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Abstract</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#scalable-machine-learning-with-microsoft-r-server-and-spark"><i class="fa fa-check"></i>Scalable Machine Learning with Microsoft R Server and Spark</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#useful-resources"><i class="fa fa-check"></i>Useful Resources</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#spark"><i class="fa fa-check"></i>Spark</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#microsoft-r-server"><i class="fa fa-check"></i>Microsoft R Server</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#azure-hdinsight"><i class="fa fa-check"></i>Azure HDInsight</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Overview</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i><b>1.1</b> Why R?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#microsoft-r-server-ftw"><i class="fa fa-check"></i><b>1.2</b> Microsoft R Server FTW</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#apache-spark"><i class="fa fa-check"></i><b>1.3</b> Apache Spark</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#sparkr"><i class="fa fa-check"></i><b>1.4</b> SparkR</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#azure-hdinsight-1"><i class="fa fa-check"></i><b>1.5</b> Azure HDInsight</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#prerequisites---what-youll-need"><i class="fa fa-check"></i><b>1.6</b> Prerequisites - What Youâ€™ll Need</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#data-used"><i class="fa fa-check"></i><b>1.7</b> Data Used</a></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#versioning"><i class="fa fa-check"></i><b>1.8</b> Versioning</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="apache-spark-1.html"><a href="apache-spark-1.html"><i class="fa fa-check"></i><b>2</b> Apache Spark</a><ul>
<li class="chapter" data-level="2.1" data-path="apache-spark-1.html"><a href="apache-spark-1.html#lazyevalfp"><i class="fa fa-check"></i><b>2.1</b> Functional Programming and Lazy Evaluation</a></li>
<li class="chapter" data-level="2.2" data-path="apache-spark-1.html"><a href="apache-spark-1.html#distributed-programming-abstractions"><i class="fa fa-check"></i><b>2.2</b> Distributed Programming Abstractions</a></li>
<li class="chapter" data-level="2.3" data-path="apache-spark-1.html"><a href="apache-spark-1.html#rdds"><i class="fa fa-check"></i><b>2.3</b> RDDs</a><ul>
<li class="chapter" data-level="2.3.1" data-path="apache-spark-1.html"><a href="apache-spark-1.html#common-transformations-and-actions"><i class="fa fa-check"></i><b>2.3.1</b> Common Transformations and Actions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="apache-spark-1.html"><a href="apache-spark-1.html#dataframes"><i class="fa fa-check"></i><b>2.4</b> DataFrames</a></li>
<li class="chapter" data-level="2.5" data-path="apache-spark-1.html"><a href="apache-spark-1.html#datasets"><i class="fa fa-check"></i><b>2.5</b> Datasets</a></li>
<li class="chapter" data-level="2.6" data-path="apache-spark-1.html"><a href="apache-spark-1.html#mllib"><i class="fa fa-check"></i><b>2.6</b> MLlib</a></li>
<li class="chapter" data-level="2.7" data-path="apache-spark-1.html"><a href="apache-spark-1.html#spark-apis"><i class="fa fa-check"></i><b>2.7</b> Spark APIs</a><ul>
<li class="chapter" data-level="2.7.1" data-path="apache-spark-1.html"><a href="apache-spark-1.html#scala"><i class="fa fa-check"></i><b>2.7.1</b> Scala</a></li>
<li class="chapter" data-level="2.7.2" data-path="apache-spark-1.html"><a href="apache-spark-1.html#pyspark"><i class="fa fa-check"></i><b>2.7.2</b> <a href="https://spark.apache.org/docs/latest/api/python/index.html">PySpark</a></a></li>
<li class="chapter" data-level="2.7.3" data-path="apache-spark-1.html"><a href="apache-spark-1.html#sparkr-1"><i class="fa fa-check"></i><b>2.7.3</b> SparkR</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rserver.html"><a href="rserver.html"><i class="fa fa-check"></i><b>3</b> R &amp; Microsoft R Server - todo</a><ul>
<li class="chapter" data-level="3.1" data-path="rserver.html"><a href="rserver.html#functional-programming-and-lazy-evaluation-in-r"><i class="fa fa-check"></i><b>3.1</b> Functional Programming and Lazy Evaluation in R</a></li>
<li class="chapter" data-level="3.2" data-path="rserver.html"><a href="rserver.html#pema"><i class="fa fa-check"></i><b>3.2</b> PEMA Algorithms and the RevoScaleR Package</a></li>
<li class="chapter" data-level="3.3" data-path="rserver.html"><a href="rserver.html#xdf"><i class="fa fa-check"></i><b>3.3</b> eXternal Data Frames (XDFs)</a></li>
<li class="chapter" data-level="3.4" data-path="rserver.html"><a href="rserver.html#computecontext"><i class="fa fa-check"></i><b>3.4</b> Compute Contexts</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="azure-hdinsight-managed-hadoop-in-the-cloud-todo.html"><a href="azure-hdinsight-managed-hadoop-in-the-cloud-todo.html"><i class="fa fa-check"></i><b>4</b> Azure HDInsight â€“ Managed Hadoop in the Cloud - todo</a><ul>
<li class="chapter" data-level="4.1" data-path="azure-hdinsight-managed-hadoop-in-the-cloud-todo.html"><a href="azure-hdinsight-managed-hadoop-in-the-cloud-todo.html#hdinsight-premium-spark-clusters-with-r-server"><i class="fa fa-check"></i><b>4.1</b> HDInsight Premium Spark Clusters with R Server</a></li>
<li class="chapter" data-level="4.2" data-path="azure-hdinsight-managed-hadoop-in-the-cloud-todo.html"><a href="azure-hdinsight-managed-hadoop-in-the-cloud-todo.html#dashboards-for-management"><i class="fa fa-check"></i><b>4.2</b> Dashboards for Management</a></li>
<li class="chapter" data-level="4.3" data-path="azure-hdinsight-managed-hadoop-in-the-cloud-todo.html"><a href="azure-hdinsight-managed-hadoop-in-the-cloud-todo.html#jupyter-and-rstudio-server"><i class="fa fa-check"></i><b>4.3</b> Jupyter and RStudio Server</a></li>
</ul></li>
<li class="part"><span><b>Provisioning and Ingesting Data</b></span></li>
<li class="chapter" data-level="5" data-path="provisioning-instructions.html"><a href="provisioning-instructions.html"><i class="fa fa-check"></i><b>5</b> Provisioning Instructions</a><ul>
<li class="chapter" data-level="5.1" data-path="provisioning-instructions.html"><a href="provisioning-instructions.html#provision-cluster-from-azure-portal"><i class="fa fa-check"></i><b>5.1</b> Provision Cluster from Azure Portal</a></li>
<li class="chapter" data-level="5.2" data-path="provisioning-instructions.html"><a href="provisioning-instructions.html#installing-packages"><i class="fa fa-check"></i><b>5.2</b> Installing Packages</a><ul>
<li class="chapter" data-level="5.2.1" data-path="provisioning-instructions.html"><a href="provisioning-instructions.html#todo---install-packages-demo"><i class="fa fa-check"></i><b>5.2.1</b> todo - install packages demo</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ingestion.html"><a href="ingestion.html"><i class="fa fa-check"></i><b>6</b> Ingesting Data into Azure Blob Storage - todo</a><ul>
<li class="chapter" data-level="6.1" data-path="ingestion.html"><a href="ingestion.html#azcopy"><i class="fa fa-check"></i><b>6.1</b> AzCopy</a></li>
<li class="chapter" data-level="6.2" data-path="ingestion.html"><a href="ingestion.html#azure-storage-explorer"><i class="fa fa-check"></i><b>6.2</b> Azure Storage Explorer</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rprofile.html"><a href="rprofile.html"><i class="fa fa-check"></i><b>7</b> Setting Your R Profile</a></li>
<li class="part"><span><b>Data Manipulation and Data Aggregation</b></span></li>
<li class="chapter" data-level="8" data-path="starting-your-machine-learning-pipeline.html"><a href="starting-your-machine-learning-pipeline.html"><i class="fa fa-check"></i><b>8</b> Starting Your Machine Learning Pipeline</a><ul>
<li class="chapter" data-level="8.1" data-path="starting-your-machine-learning-pipeline.html"><a href="starting-your-machine-learning-pipeline.html#finding-the-sparkr-library"><i class="fa fa-check"></i><b>8.1</b> Finding the SparkR Library</a></li>
<li class="chapter" data-level="8.2" data-path="starting-your-machine-learning-pipeline.html"><a href="starting-your-machine-learning-pipeline.html#creating-a-spark-context"><i class="fa fa-check"></i><b>8.2</b> Creating a Spark Context</a></li>
<li class="chapter" data-level="8.3" data-path="starting-your-machine-learning-pipeline.html"><a href="starting-your-machine-learning-pipeline.html#creating-dataframes"><i class="fa fa-check"></i><b>8.3</b> Creating DataFrames</a><ul>
<li class="chapter" data-level="8.3.1" data-path="starting-your-machine-learning-pipeline.html"><a href="starting-your-machine-learning-pipeline.html#from-local-r-data.frames"><i class="fa fa-check"></i><b>8.3.1</b> From Local R data.frames</a></li>
<li class="chapter" data-level="8.3.2" data-path="starting-your-machine-learning-pipeline.html"><a href="starting-your-machine-learning-pipeline.html#creating-dataframes-from-csv-files"><i class="fa fa-check"></i><b>8.3.2</b> Creating DataFrames from CSV Files</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="starting-your-machine-learning-pipeline.html"><a href="starting-your-machine-learning-pipeline.html#caching-dataframes"><i class="fa fa-check"></i><b>8.4</b> Caching DataFrames</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="exploratory-data-analysis-with-sparkr.html"><a href="exploratory-data-analysis-with-sparkr.html"><i class="fa fa-check"></i><b>9</b> Exploratory Data Analysis with SparkR</a><ul>
<li class="chapter" data-level="9.1" data-path="exploratory-data-analysis-with-sparkr.html"><a href="exploratory-data-analysis-with-sparkr.html#sparkr-the-explorer"><i class="fa fa-check"></i><b>9.1</b> SparkR the Explorer</a></li>
<li class="chapter" data-level="9.2" data-path="exploratory-data-analysis-with-sparkr.html"><a href="exploratory-data-analysis-with-sparkr.html#doing-data-aggregations-with-sparkr-efficiently"><i class="fa fa-check"></i><b>9.2</b> Doing Data Aggregations with SparkR Efficiently</a></li>
<li class="chapter" data-level="9.3" data-path="exploratory-data-analysis-with-sparkr.html"><a href="exploratory-data-analysis-with-sparkr.html#from-spark-dataframes-to-local-dataframes"><i class="fa fa-check"></i><b>9.3</b> From Spark DataFrames to Local Dataframes</a></li>
<li class="chapter" data-level="9.4" data-path="exploratory-data-analysis-with-sparkr.html"><a href="exploratory-data-analysis-with-sparkr.html#plotting-results"><i class="fa fa-check"></i><b>9.4</b> Plotting Results</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-manipulation-with-sparkr.html"><a href="data-manipulation-with-sparkr.html"><i class="fa fa-check"></i><b>10</b> Data Manipulation with SparkR</a><ul>
<li class="chapter" data-level="10.1" data-path="data-manipulation-with-sparkr.html"><a href="data-manipulation-with-sparkr.html#data-aggregations"><i class="fa fa-check"></i><b>10.1</b> Data Aggregations</a></li>
<li class="chapter" data-level="10.2" data-path="data-manipulation-with-sparkr.html"><a href="data-manipulation-with-sparkr.html#collecting-results-to-local-dataframes"><i class="fa fa-check"></i><b>10.2</b> Collecting Results to Local Dataframes</a></li>
<li class="chapter" data-level="10.3" data-path="data-manipulation-with-sparkr.html"><a href="data-manipulation-with-sparkr.html#dimple-bar-charts"><i class="fa fa-check"></i><b>10.3</b> Dimple Bar Charts</a></li>
<li class="chapter" data-level="10.4" data-path="data-manipulation-with-sparkr.html"><a href="data-manipulation-with-sparkr.html#merging-data"><i class="fa fa-check"></i><b>10.4</b> Merging Data</a></li>
<li class="chapter" data-level="10.5" data-path="data-manipulation-with-sparkr.html"><a href="data-manipulation-with-sparkr.html#exploring-credit-scores-for-mortgage-borrowers"><i class="fa fa-check"></i><b>10.5</b> Exploring Credit Scores for Mortgage Borrowers</a><ul>
<li class="chapter" data-level="10.5.1" data-path="data-manipulation-with-sparkr.html"><a href="data-manipulation-with-sparkr.html#ingesting-originations-data-into-spark-dataframes"><i class="fa fa-check"></i><b>10.5.1</b> Ingesting Originations Data into Spark DataFrames</a></li>
<li class="chapter" data-level="10.5.2" data-path="data-manipulation-with-sparkr.html"><a href="data-manipulation-with-sparkr.html#calculting-state-level-credit-attributes"><i class="fa fa-check"></i><b>10.5.2</b> Calculting State Level Credit Attributes</a></li>
<li class="chapter" data-level="10.5.3" data-path="data-manipulation-with-sparkr.html"><a href="data-manipulation-with-sparkr.html#credit-attribute-choropleths"><i class="fa fa-check"></i><b>10.5.3</b> Credit Attribute Choropleths</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Modeling and Prediction with Microsoft R Server</b></span></li>
<li class="chapter" data-level="11" data-path="modeling-with-microsoft-r-server.html"><a href="modeling-with-microsoft-r-server.html"><i class="fa fa-check"></i><b>11</b> Modeling with Microsoft R Server</a><ul>
<li class="chapter" data-level="11.1" data-path="modeling-with-microsoft-r-server.html"><a href="modeling-with-microsoft-r-server.html#import-csv-to-xdf"><i class="fa fa-check"></i><b>11.1</b> Import CSV to XDF</a></li>
<li class="chapter" data-level="11.2" data-path="modeling-with-microsoft-r-server.html"><a href="modeling-with-microsoft-r-server.html#splitting-xdf-into-train-and-test-tests"><i class="fa fa-check"></i><b>11.2</b> Splitting XDF into Train and Test Tests</a></li>
<li class="chapter" data-level="11.3" data-path="modeling-with-microsoft-r-server.html"><a href="modeling-with-microsoft-r-server.html#training-binary-classification-models"><i class="fa fa-check"></i><b>11.3</b> Training Binary Classification Models</a><ul>
<li class="chapter" data-level="11.3.1" data-path="modeling-with-microsoft-r-server.html"><a href="modeling-with-microsoft-r-server.html#logistic-regression-models"><i class="fa fa-check"></i><b>11.3.1</b> Logistic Regression Models</a></li>
<li class="chapter" data-level="11.3.2" data-path="modeling-with-microsoft-r-server.html"><a href="modeling-with-microsoft-r-server.html#tree-and-ensemble-classifiers"><i class="fa fa-check"></i><b>11.3.2</b> Tree and Ensemble Classifiers</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="modeling-with-microsoft-r-server.html"><a href="modeling-with-microsoft-r-server.html#testing-models"><i class="fa fa-check"></i><b>11.4</b> Testing Models</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>12</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Scalable Machine Learning and Data Science with Microsoft R Server and Spark</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exploratory-data-analysis-with-sparkr" class="section level1">
<h1><span class="header-section-number">Chapter 9</span> Exploratory Data Analysis with SparkR</h1>
<div id="sparkr-the-explorer" class="section level2">
<h2><span class="header-section-number">9.1</span> SparkR the Explorer</h2>
<p>SparkR has a limited API for modeling. As of 1.6.1, the only supported modeling function in SparkR is a glm. There are many more available modeling functions in the R Server <code>RevoScaleR</code> library that can be computed using a Spark compute context. We will discuss this in more detail in the subsequent chapters.</p>
<p>While limited in modeling, SparkR shows its versatility for data exploration. We show how easy it is to create data exploration pipelines with SparkR and open source R packages.</p>
</div>
<div id="doing-data-aggregations-with-sparkr-efficiently" class="section level2">
<h2><span class="header-section-number">9.2</span> Doing Data Aggregations with SparkR Efficiently</h2>
<p>Since Spark evaluates objects lazily, tremendous speedups can be achieved by putting a little thought into our data analysis pipelines. In ths section, we will analyze the average arrival delay for flights and group them by carrier, origin and destination. These few feature variables are the only ones we need, so we can remove the redundant columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">select_cols &lt;-<span class="st"> </span>function(<span class="dt">sparkDF =</span> airDF) {
  
  <span class="kw">library</span>(magrittr)
  
  sparkDF %&gt;%<span class="st"> </span>
<span class="st">    </span>SparkR::<span class="kw">select</span>(airDF$FL_DATE, airDF$DAY_OF_WEEK,
                   airDF$UNIQUE_CARRIER, airDF$ORIGIN,
                   airDF$DEST, airDF$ARR_DELAY) -&gt;<span class="st"> </span>skinny_df
  
  skinny_df %&lt;&gt;%<span class="st"> </span>SparkR::<span class="kw">rename</span>(
    <span class="dt">flight_date =</span> skinny_df$FL_DATE,
    <span class="dt">day_of_week =</span> skinny_df$DAY_OF_WEEK,
    <span class="dt">carrier =</span> skinny_df$UNIQUE_CARRIER, 
    <span class="dt">origin =</span> skinny_df$ORIGIN,
    <span class="dt">destination =</span> skinny_df$DEST, 
    <span class="dt">arrival_delay =</span> skinny_df$ARR_DELAY
  )
  
  
  <span class="kw">return</span>(skinny_df)
  
}

air_df &lt;-<span class="st"> </span><span class="kw">select_cols</span>()</code></pre></div>
<p>The function above creates a transformation on our airlines dataset and renames the columns we need for our analysis. At this point, we donâ€™t have any actions yet, so this is simply a promise the Spark interpreter has given us for later evaluation.</p>
</div>
<div id="from-spark-dataframes-to-local-dataframes" class="section level2">
<h2><span class="header-section-number">9.3</span> From Spark DataFrames to Local Dataframes</h2>
<p>For our next step, we will group by carrier, origin and destination, and calculate the average arrival delay. Our resulting dataframe should be rather condensed, so we will collect our results and save them to a local R <code>data.frame</code>. Observe how simple it is to create a pipeline that starts with a Spark DataFrame and outputs a local data.frame you can interact with locally.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">agg_delay &lt;-<span class="st"> </span>function(<span class="dt">airdf =</span> air_df) {
  
  <span class="kw">library</span>(magrittr)
  
  airdf %&gt;%<span class="st"> </span>SparkR::<span class="kw">group_by</span>(airdf$carrier,
                             airdf$origin,
                             airdf$destination) %&gt;%<span class="st"> </span>
<span class="st">    </span>SparkR::<span class="kw">summarize</span>(<span class="dt">counts =</span> <span class="kw">n</span>(airdf$arrival_delay),
                      <span class="dt">ave_delay =</span> <span class="kw">mean</span>(airdf$arrival_delay)) -&gt;<span class="st"> </span>summary_df
  
  <span class="kw">return</span>(summary_df)
  
}

agg_df &lt;-<span class="st"> </span><span class="kw">agg_delay</span>()
agg_df_local &lt;-<span class="st"> </span>agg_df %&gt;%<span class="st"> </span><span class="kw">collect</span>() %&gt;%<span class="st"> </span>dplyr::tbl_df
<span class="kw">save</span>(agg_df_local, <span class="dt">file =</span> <span class="st">&quot;aggflightslocal.RData&quot;</span>)</code></pre></div>
<p>If you are familiar with the dplyr grammar of data manipulation, you should be ecstatic by how your knowledge transfers over directly to manipulating Spark dataframes (and youâ€™ll probably just wonder why Spark DataFrames donâ€™t just have a supported backend by dplyr yet). We saved our local data.frame to disk so we donâ€™t have to re-run the Spark datasteps again.</p>
</div>
<div id="plotting-results" class="section level2">
<h2><span class="header-section-number">9.4</span> Plotting Results</h2>
<p>We deliberately kept the <strong>carrier</strong> column in our analysis, in case we wanted to visualize or analyze delays by that feature. For now, let us narrow our focus to simply the routes of our flights.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load the agg_df_local calculated above</span>
<span class="kw">load</span>(<span class="st">&quot;aggflightslocal.RData&quot;</span>)

delays_routes &lt;-<span class="st"> </span>function(<span class="dt">delay_df =</span> agg_df_local) {
  
  <span class="kw">library</span>(dplyr)
  
  delay_df %&gt;%
<span class="st">    </span><span class="kw">group_by</span>(origin, destination) %&gt;%
<span class="st">    </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">sum</span>(counts), 
              <span class="dt">arrival_delay =</span> <span class="kw">weighted.mean</span>(ave_delay, counts)) -&gt;<span class="st"> </span>route_delays
  
  <span class="kw">return</span>(route_delays)
 
  
}

<span class="kw">delays_routes</span>()</code></pre></div>
<pre><code>## Source: local data frame [9,171 x 4]
## Groups: origin [?]
## 
##    origin destination total arrival_delay
##     (chr)       (chr) (dbl)         (dbl)
## 1     ABE         ALB     2    23.0000000
## 2     ABE         ATL 18482     7.4414566
## 3     ABE         AVP  1587     2.3238815
## 4     ABE         AZO     0           NaN
## 5     ABE         BDL     1     1.0000000
## 6     ABE         BHM     1    -3.0000000
## 7     ABE         BWI  2502     4.3033573
## 8     ABE         CLE  6331    -2.4669089
## 9     ABE         CLT  8531     0.1807525
## 10    ABE         CVG  6654     0.4804629
## ..    ...         ...   ...           ...</code></pre>
<p>Let us make a heatmap of the delays, by picking just a few routes. We will use the <code>ggplot</code> library to make our base plot, and then use the <code>plotly</code> package to make our plot more interactive!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

plot_route_delays &lt;-<span class="st"> </span>function(<span class="dt">min_routes =</span> <span class="dv">10</span>) {
  
  <span class="kw">library</span>(dplyr)
  <span class="kw">library</span>(ggplot2)
  
  gplot &lt;-<span class="st"> </span><span class="kw">delays_routes</span>() %&gt;%
<span class="st">    </span><span class="kw">filter</span>(total &gt;<span class="st"> </span>min_routes) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(total)) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">filter</span>(origin %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;JFK&quot;</span>, <span class="st">&quot;LGA&quot;</span>, <span class="st">&quot;IAD&quot;</span>, <span class="st">&quot;DCA&quot;</span>,
                         <span class="st">&quot;ATL&quot;</span>, <span class="st">&quot;DFW&quot;</span>, <span class="st">&quot;ORD&quot;</span>, <span class="st">&quot;IAH&quot;</span>, 
                         <span class="st">&quot;DEN&quot;</span>, <span class="st">&quot;CLT&quot;</span>),
           destination %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ATL&quot;</span>, <span class="st">&quot;BDL&quot;</span>, <span class="st">&quot;BOS&quot;</span>, <span class="st">&quot;JFK&quot;</span>, 
                              <span class="st">&quot;IAD&quot;</span>, <span class="st">&quot;LGA&quot;</span>, <span class="st">&quot;DCA&quot;</span>, <span class="st">&quot;IAD&quot;</span>,
                              <span class="st">&quot;DFW&quot;</span>, <span class="st">&quot;ORD&quot;</span>, <span class="st">&quot;IAH&quot;</span>, <span class="st">&quot;DEN&quot;</span>, 
                              <span class="st">&quot;CLT&quot;</span>)) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> origin, <span class="dt">y =</span> destination, <span class="dt">fill =</span> arrival_delay)) +<span class="st"> </span>
<span class="st">    </span><span class="kw">geom_tile</span>(<span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) +<span class="st"> </span>
<span class="st">    </span><span class="kw">scale_fill_gradient</span>(<span class="dt">low =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">high =</span> <span class="st">&quot;steelblue&quot;</span>)
  
  <span class="kw">return</span>(gplot)
  
}

gplot &lt;-<span class="st"> </span><span class="kw">plot_route_delays</span>(<span class="dv">100</span>) +<span class="st"> </span><span class="kw">theme_bw</span>()
<span class="kw">library</span>(plotly)
<span class="kw">ggplotly</span>(gplot, <span class="dt">width =</span> <span class="dv">650</span>)</code></pre></div>
<p><div id="htmlwidget-5049" style="width:650px;height:500px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-5049">{"x":{"data":[{"x":[1,2,3,4,5,6,7,8,9,10],"y":[1,2,3,4,5,6,7,8,9,10,11,12],"z":[[null,0.575508881420848,0.52810844655813,0.527958749889444,0.637930784007805,0.592529207537495,0.606979625543442,0.695737837523735,0.679733144401821,0.706186984944412],[0.550064527797597,0.478892106542017,0.392950543566392,0.580948911381854,0.500382731139362,0.560446824006759,0.422893881898291,0.431219820318448,0.417954445634229,0.661827807649112],[0.706310281044572,0.617041907482155,0.413720353617263,0.593785183966634,0.588320991174162,0.722292138029002,0.539622151058074,0.729152775028315,0.235121036168544,0.718025885066374],[0.526218875795656,null,0.41856645037478,0.390148951560722,0.495561027048762,0.483323215537141,0.415191062301563,0.768243360314104,0.527959075751454,0.629939981047246],[0.552503822806452,0.47254206702059,null,0.49379845405737,0.517253988203036,0.580208947203045,0.371211099757297,0.659552591737778,0.220455537114002,0.586887051834747],[0.550608220037991,0.455340818477051,0.289705771862716,null,0.572198162858736,0.51572385106483,0.501481367157469,0.674510392168591,0.537271786336865,0.664792527515765],[0.599152232086551,0.388401707258818,0.358126994221729,0.532355896409273,null,0.381529665092533,0.491994416464964,0.879366384928629,0.404471396793396,0.528429427827822],[0.596156972849592,0.50128925203263,0,0.494277382737415,0.4949483797451,null,0.360495253604851,0.583528936440087,0.572680561027596,0.655904901246423],[0.597908251140293,0.475824911365917,0.326265883472013,0.524674898543362,0.544286048832883,0.478614059959527,null,0.632307970936729,0.479956367425385,0.621975497300887],[0.728801354712092,0.800136892737496,0.710030314747219,0.53663057361579,0.701170387224551,0.783289233033361,0.579615907525195,null,null,0.768124363798173],[0.80914732187602,0.728650036372322,0.314995103343137,0.715728072369897,0.673842272879803,0.752150813914015,0.702422145601397,null,null,0.714806355914222],[0.749297992062937,0.652862949154039,0.483269520157869,0.686424293549738,0.639263911488244,0.585397080131902,0.710643132564431,1,0.563974555015312,null]],"text":[[null,"origin: CLT<br>destination: ATL<br>arrival_delay: 8.11","origin: DCA<br>destination: ATL<br>arrival_delay: 7.08","origin: DEN<br>destination: ATL<br>arrival_delay: 7.07","origin: DFW<br>destination: ATL<br>arrival_delay: 9.47","origin: IAD<br>destination: ATL<br>arrival_delay: 8.48","origin: IAH<br>destination: ATL<br>arrival_delay: 8.8","origin: JFK<br>destination: ATL<br>arrival_delay: 10.73","origin: LGA<br>destination: ATL<br>arrival_delay: 10.38","origin: ORD<br>destination: ATL<br>arrival_delay: 10.96"],["origin: ATL<br>destination: BDL<br>arrival_delay: 7.56","origin: CLT<br>destination: BDL<br>arrival_delay: 6","origin: DCA<br>destination: BDL<br>arrival_delay: 4.13","origin: DEN<br>destination: BDL<br>arrival_delay: 8.23","origin: DFW<br>destination: BDL<br>arrival_delay: 6.47","origin: IAD<br>destination: BDL<br>arrival_delay: 7.78","origin: IAH<br>destination: BDL<br>arrival_delay: 4.78","origin: JFK<br>destination: BDL<br>arrival_delay: 4.97","origin: LGA<br>destination: BDL<br>arrival_delay: 4.68","origin: ORD<br>destination: BDL<br>arrival_delay: 9.99"],["origin: ATL<br>destination: BOS<br>arrival_delay: 10.96","origin: CLT<br>destination: BOS<br>arrival_delay: 9.02","origin: DCA<br>destination: BOS<br>arrival_delay: 4.58","origin: DEN<br>destination: BOS<br>arrival_delay: 8.51","origin: DFW<br>destination: BOS<br>arrival_delay: 8.39","origin: IAD<br>destination: BOS<br>arrival_delay: 11.31","origin: IAH<br>destination: BOS<br>arrival_delay: 7.33","origin: JFK<br>destination: BOS<br>arrival_delay: 11.46","origin: LGA<br>destination: BOS<br>arrival_delay: 0.69","origin: ORD<br>destination: BOS<br>arrival_delay: 11.22"],["origin: ATL<br>destination: CLT<br>arrival_delay: 7.04",null,"origin: DCA<br>destination: CLT<br>arrival_delay: 4.69","origin: DEN<br>destination: CLT<br>arrival_delay: 4.07","origin: DFW<br>destination: CLT<br>arrival_delay: 6.37","origin: IAD<br>destination: CLT<br>arrival_delay: 6.1","origin: IAH<br>destination: CLT<br>arrival_delay: 4.62","origin: JFK<br>destination: CLT<br>arrival_delay: 12.31","origin: LGA<br>destination: CLT<br>arrival_delay: 7.07","origin: ORD<br>destination: CLT<br>arrival_delay: 9.3"],["origin: ATL<br>destination: DCA<br>arrival_delay: 7.61","origin: CLT<br>destination: DCA<br>arrival_delay: 5.87",null,"origin: DEN<br>destination: DCA<br>arrival_delay: 6.33","origin: DFW<br>destination: DCA<br>arrival_delay: 6.84","origin: IAD<br>destination: DCA<br>arrival_delay: 8.21","origin: IAH<br>destination: DCA<br>arrival_delay: 3.66","origin: JFK<br>destination: DCA<br>arrival_delay: 9.94","origin: LGA<br>destination: DCA<br>arrival_delay: 0.37","origin: ORD<br>destination: DCA<br>arrival_delay: 8.36"],["origin: ATL<br>destination: DEN<br>arrival_delay: 7.57","origin: CLT<br>destination: DEN<br>arrival_delay: 5.49","origin: DCA<br>destination: DEN<br>arrival_delay: 1.88",null,"origin: DFW<br>destination: DEN<br>arrival_delay: 8.04","origin: IAD<br>destination: DEN<br>arrival_delay: 6.81","origin: IAH<br>destination: DEN<br>arrival_delay: 6.5","origin: JFK<br>destination: DEN<br>arrival_delay: 10.27","origin: LGA<br>destination: DEN<br>arrival_delay: 7.28","origin: ORD<br>destination: DEN<br>arrival_delay: 10.06"],["origin: ATL<br>destination: DFW<br>arrival_delay: 8.63","origin: CLT<br>destination: DFW<br>arrival_delay: 4.03","origin: DCA<br>destination: DFW<br>arrival_delay: 3.37","origin: DEN<br>destination: DFW<br>arrival_delay: 7.17",null,"origin: IAD<br>destination: DFW<br>arrival_delay: 3.88","origin: IAH<br>destination: DFW<br>arrival_delay: 6.29","origin: JFK<br>destination: DFW<br>arrival_delay: 14.73","origin: LGA<br>destination: DFW<br>arrival_delay: 4.38","origin: ORD<br>destination: DFW<br>arrival_delay: 7.08"],["origin: ATL<br>destination: IAD<br>arrival_delay: 8.56","origin: CLT<br>destination: IAD<br>arrival_delay: 6.49","origin: DCA<br>destination: IAD<br>arrival_delay: -4.43","origin: DEN<br>destination: IAD<br>arrival_delay: 6.34","origin: DFW<br>destination: IAD<br>arrival_delay: 6.35",null,"origin: IAH<br>destination: IAD<br>arrival_delay: 3.42","origin: JFK<br>destination: IAD<br>arrival_delay: 8.29","origin: LGA<br>destination: IAD<br>arrival_delay: 8.05","origin: ORD<br>destination: IAD<br>arrival_delay: 9.86"],["origin: ATL<br>destination: IAH<br>arrival_delay: 8.6","origin: CLT<br>destination: IAH<br>arrival_delay: 5.94","origin: DCA<br>destination: IAH<br>arrival_delay: 2.68","origin: DEN<br>destination: IAH<br>arrival_delay: 7","origin: DFW<br>destination: IAH<br>arrival_delay: 7.43","origin: IAD<br>destination: IAH<br>arrival_delay: 6",null,"origin: JFK<br>destination: IAH<br>arrival_delay: 9.35","origin: LGA<br>destination: IAH<br>arrival_delay: 6.03","origin: ORD<br>destination: IAH<br>arrival_delay: 9.12"],["origin: ATL<br>destination: JFK<br>arrival_delay: 11.45","origin: CLT<br>destination: JFK<br>arrival_delay: 13.01","origin: DCA<br>destination: JFK<br>arrival_delay: 11.04","origin: DEN<br>destination: JFK<br>arrival_delay: 7.26","origin: DFW<br>destination: JFK<br>arrival_delay: 10.85","origin: IAD<br>destination: JFK<br>arrival_delay: 12.64","origin: IAH<br>destination: JFK<br>arrival_delay: 8.2",null,null,"origin: ORD<br>destination: JFK<br>arrival_delay: 12.31"],["origin: ATL<br>destination: LGA<br>arrival_delay: 13.2","origin: CLT<br>destination: LGA<br>arrival_delay: 11.45","origin: DCA<br>destination: LGA<br>arrival_delay: 2.43","origin: DEN<br>destination: LGA<br>arrival_delay: 11.17","origin: DFW<br>destination: LGA<br>arrival_delay: 10.25","origin: IAD<br>destination: LGA<br>arrival_delay: 11.96","origin: IAH<br>destination: LGA<br>arrival_delay: 10.88",null,null,"origin: ORD<br>destination: LGA<br>arrival_delay: 11.15"],["origin: ATL<br>destination: ORD<br>arrival_delay: 11.9","origin: CLT<br>destination: ORD<br>arrival_delay: 9.8","origin: DCA<br>destination: ORD<br>arrival_delay: 6.1","origin: DEN<br>destination: ORD<br>arrival_delay: 10.53","origin: DFW<br>destination: ORD<br>arrival_delay: 9.5","origin: IAD<br>destination: ORD<br>arrival_delay: 8.33","origin: IAH<br>destination: ORD<br>arrival_delay: 11.06","origin: JFK<br>destination: ORD<br>arrival_delay: 17.36","origin: LGA<br>destination: ORD<br>arrival_delay: 7.86",null]],"colorscale":[[0,"#FFFFFF"],[0.220455537114002,"#D8E2EE"],[0.235121036168544,"#D6E0ED"],[0.289705771862716,"#CCD9E9"],[0.314995103343137,"#C8D6E7"],[0.326265883472013,"#C6D4E6"],[0.358126994221729,"#C0D0E4"],[0.360495253604851,"#C0D0E4"],[0.371211099757297,"#BECFE3"],[0.381529665092533,"#BCCDE2"],[0.388401707258818,"#BBCCE2"],[0.390148951560722,"#BBCCE2"],[0.392950543566392,"#BACCE1"],[0.404471396793396,"#B8CAE1"],[0.413720353617263,"#B6C9E0"],[0.415191062301563,"#B6C9E0"],[0.417954445634229,"#B6C9E0"],[0.41856645037478,"#B6C9DF"],[0.422893881898291,"#B5C8DF"],[0.431219820318448,"#B3C7DF"],[0.455340818477051,"#AFC4DD"],[0.47254206702059,"#ACC2DB"],[0.475824911365917,"#ABC1DB"],[0.478614059959527,"#ABC1DB"],[0.478892106542017,"#ABC1DB"],[0.479956367425385,"#ABC1DB"],[0.483269520157869,"#AAC1DB"],[0.483323215537141,"#AAC1DB"],[0.491994416464964,"#A9BFDA"],[0.49379845405737,"#A8BFDA"],[0.494277382737415,"#A8BFDA"],[0.4949483797451,"#A8BFDA"],[0.495561027048762,"#A8BFDA"],[0.500382731139362,"#A7BED9"],[0.50128925203263,"#A7BED9"],[0.501481367157469,"#A7BED9"],[0.51572385106483,"#A4BCD8"],[0.517253988203036,"#A4BCD8"],[0.524674898543362,"#A3BBD7"],[0.526218875795656,"#A2BBD7"],[0.527958749889444,"#A2BBD7"],[0.527959075751454,"#A2BBD7"],[0.52810844655813,"#A2BBD7"],[0.528429427827822,"#A2BBD7"],[0.532355896409273,"#A1BAD7"],[0.53663057361579,"#A1BAD7"],[0.537271786336865,"#A1BAD7"],[0.539622151058074,"#A0B9D6"],[0.544286048832883,"#9FB9D6"],[0.550064527797597,"#9EB8D6"],[0.550608220037991,"#9EB8D6"],[0.552503822806452,"#9EB8D5"],[0.560446824006759,"#9CB7D5"],[0.563974555015312,"#9CB6D5"],[0.572198162858736,"#9AB5D4"],[0.572680561027596,"#9AB5D4"],[0.575508881420848,"#9AB5D4"],[0.579615907525195,"#99B4D3"],[0.580208947203045,"#99B4D3"],[0.580948911381854,"#99B4D3"],[0.583528936440087,"#98B4D3"],[0.585397080131902,"#98B4D3"],[0.586887051834747,"#98B4D3"],[0.588320991174162,"#97B3D3"],[0.592529207537495,"#97B3D2"],[0.593785183966634,"#96B3D2"],[0.596156972849592,"#96B2D2"],[0.597908251140293,"#96B2D2"],[0.599152232086551,"#95B2D2"],[0.606979625543442,"#94B1D1"],[0.617041907482155,"#92B0D1"],[0.621975497300887,"#91AFD0"],[0.629939981047246,"#90AED0"],[0.632307970936729,"#8FAECF"],[0.637930784007805,"#8EADCF"],[0.639263911488244,"#8EADCF"],[0.652862949154039,"#8CABCE"],[0.655904901246423,"#8BABCE"],[0.659552591737778,"#8AABCD"],[0.661827807649112,"#8AAACD"],[0.664792527515765,"#89AACD"],[0.673842272879803,"#88A9CC"],[0.674510392168591,"#88A9CC"],[0.679733144401821,"#87A8CC"],[0.686424293549738,"#86A7CB"],[0.695737837523735,"#84A6CB"],[0.701170387224551,"#83A6CA"],[0.702422145601397,"#83A5CA"],[0.706186984944412,"#82A5CA"],[0.706310281044572,"#82A5CA"],[0.710030314747219,"#81A4CA"],[0.710643132564431,"#81A4CA"],[0.714806355914222,"#80A4C9"],[0.715728072369897,"#80A4C9"],[0.718025885066374,"#80A3C9"],[0.722292138029002,"#7FA3C9"],[0.728650036372322,"#7EA2C8"],[0.728801354712092,"#7EA2C8"],[0.729152775028315,"#7EA2C8"],[0.749297992062937,"#7AA0C7"],[0.752150813914015,"#799FC6"],[0.768124363798173,"#769DC5"],[0.768243360314104,"#769DC5"],[0.783289233033361,"#739CC4"],[0.800136892737496,"#709AC3"],[0.80914732187602,"#6E99C2"],[0.879366384928629,"#6090BD"],[1,"#4682B4"]],"type":"heatmap","showscale":false,"autocolorscale":false,"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","name":""},{"x":[0.4,10.6],"y":[0.4,12.6],"name":"99_5251e46a06ff20cb5bb7f42212b46bc7","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#FCFCFD"],[0.0476190476190476,"#F3F6FA"],[0.0952380952380952,"#EBF0F7"],[0.142857142857143,"#E3EAF3"],[0.19047619047619,"#DBE4F0"],[0.238095238095238,"#D3DEEC"],[0.285714285714286,"#CBD8E9"],[0.333333333333333,"#C3D3E5"],[0.380952380952381,"#BBCDE2"],[0.428571428571429,"#B3C7DE"],[0.476190476190476,"#ABC1DB"],[0.523809523809524,"#A3BBD8"],[0.571428571428571,"#9BB6D4"],[0.619047619047619,"#92B0D1"],[0.666666666666667,"#8AAACD"],[0.714285714285714,"#82A5CA"],[0.761904761904762,"#799FC6"],[0.80952380952381,"#709AC3"],[0.857142857142857,"#6794BF"],[0.904761904761905,"#5E8FBC"],[0.952380952380952,"#5489B9"],[1,"#4A84B5"]],"colorbar":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"thickness":23.04,"title":"arrival_delay","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022},"tickmode":"array","ticktext":["0","5","10","15"],"tickvals":[0.19047619047619,0.428571428571429,0.666666666666667,0.904761904761905],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":12.7521793275218},"ticklen":2,"len":0.5}}}],"layout":{"margin":{"b":43.8356164383562,"l":47.0236612702366,"t":27.1581569115816,"r":7.97011207970112},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022},"xaxis":{"type":"linear","autorange":false,"tickmode":"array","range":[0.4,10.6],"ticktext":["ATL","CLT","DCA","DEN","DFW","IAD","IAH","JFK","LGA","ORD"],"tickvals":[1,2,3,4,5,6,7,8,9,10],"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.98505603985056,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":12.7521793275218},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,1],"gridcolor":"rgba(229,229,229,1)","gridwidth":0.265670402656704,"zeroline":false,"anchor":"y","title":"origin","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022},"hoverformat":".2f"},"yaxis":{"type":"linear","autorange":false,"tickmode":"array","range":[0.4,12.6],"ticktext":["ATL","BDL","BOS","CLT","DCA","DEN","DFW","IAD","IAH","JFK","LGA","ORD"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12],"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.98505603985056,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":12.7521793275218},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,1],"gridcolor":"rgba(229,229,229,1)","gridwidth":0.265670402656704,"zeroline":false,"anchor":"x","title":"destination","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":15.9402241594022},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(127,127,127,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":12.7521793275218},"y":1},"hovermode":"closest"},"width":650,"source":"A","config":{"modeBarButtonsToRemove":["sendDataToCloud"]},"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="starting-your-machine-learning-pipeline.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-manipulation-with-sparkr.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/06-spark-context.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
